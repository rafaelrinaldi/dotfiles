# vim: ft=fish
set -gx LANG "en_US.UTF-8"
set -gx LC_CTYPE "en_US.UTF-8"

set -gx EDITOR nvim
set -gx COLORTERM truecolor
set -gx TERM xterm-256color
set -gx MANPAGER "nvim +Man!"

set -gx XDG_CONFIG_HOME "$HOME/.config"

set -gx BAT_THEME ansi

set -gx HOMEBREW_NO_AUTO_UPDATE true

set -gx GIT_AUTHOR_NAME "Rafael Rinaldi"
set -gx GIT_AUTHOR_EMAIL {{ .email }}
set -gx GIT_COMMITTER_NAME $GIT_AUTHOR_NAME
set -gx GIT_COMMITTER_EMAIL $GIT_AUTHOR_EMAIL

set -gx GH_TOKEN {{ .github_token }}
set -gx GITHUB_TOKEN $GH_TOKEN
{{- if not (hasKey . "isPersonal") }}
{{- fail "Config not initialized. Please set CHEZMOI_MACHINE_PROFILE=work (or personal) and run 'chezmoi init' first" }}
{{- end }}
{{- if .isPersonal }}
set -gx NPM_TOKEN {{ .npm_token }}
{{- else }}
set -gx GPR_USER {{ .github_user }}
set -gx GPR_API_KEY {{ .github_token }}

set -gx ANDROID_HOME $HOME/Library/Android/sdk
set -gx ANDROID_EMU_SUPPRESS_CRASH_RPT 1
set -gx ANDROID_EMU_DEBUG 0
set -gx ANDROID_EMU_LOG_TO_STDOUT 1
# Set JAVA_HOME only if Java is available via asdf (suppresses warning if not set)
set -l java_path (asdf where java 2>/dev/null)
if test -n "$java_path"
    set -gx JAVA_HOME "$java_path"
end

fish_add_path $ANDROID_HOME/emulator
fish_add_path $ANDROID_HOME/platform-tools

set -gx OPENSSL_PATH "/usr/local/openssl-3.5.2"
set -gx PKG_CONFIG_PATH "$OPENSSL_PATH/lib/pkgconfig:$PKG_CONFIG_PATH"
set -gx RUBY_CONFIGURE_OPTS "--disable-install-doc --with-openssl-dir=$OPENSSL_PATH"
set -gx SSL_CERT_FILE "$OPENSSL_PATH/ssl/cert.pem"
{{- end }}

{{- if hasKey . "segment_typewriter_token" }}
set -gx SEGMENT_TYPEWRITER_TOKEN {{ .segment_typewriter_token }}
{{- end }}
{{- if hasKey . "match_password" }}
set -gx MATCH_PASSWORD {{ .match_password }}
{{- end }}
