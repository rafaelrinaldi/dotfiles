#!/bin/bash
# set ft=sh

DOTFILES="$HOME/dotfiles"
VS_CODE="$HOME/Library/Application Support/Code/User"

echo "Updating Homebrew..."

brew update &> /dev/null

echo "Installing Homebrew stuff..."

# Install Homebrew stuff
cat ../Brewfile | xargs brew install &> /dev/null

# Install Cask if not available
if [ -z `which brew cask` ]; then
  echo "Installing Cask..."
  brew tap caskroom/cask &> /dev/null
fi

echo "Installing Cask stuff..."

# Install Cask stuff
cat ../Caskfile | xargs brew cask install &> /dev/null

# Setup npm credentials if needed
if [ ! -f $HOME/.npmrc ]; then
  echo "Adding npm credentials"
  npm adduser
fi

echo "Updating Vim plugins..."

vim +PluginUpdate +qall &> /dev/null

echo "Updating VS Code settings..."

mv $DOTFILES/vscode/* $VS_CODE/

echo "Everything was setup!"
